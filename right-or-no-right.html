<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bill of Rights — Right or No Right?</title>
  <style>
    :root{
      --bg:#0b1220; --text:#e7eefc; --muted:#a8b4cf;
      --border: rgba(255,255,255,0.10);
      --shadow: 0 18px 55px rgba(0,0,0,.35);
      --radius: 18px; --radius2: 14px;
      --good:#2bd576; --bad:#ff5c7a; --warn:#ffd166; --accent:#7aa2ff;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:var(--sans); color:var(--text);
      background: radial-gradient(900px 500px at 15% 15%, rgba(122,162,255,.18), transparent 60%),
                  radial-gradient(900px 500px at 85% 25%, rgba(43,213,118,.14), transparent 60%),
                  radial-gradient(900px 500px at 60% 85%, rgba(255,92,122,.12), transparent 60%),
                  var(--bg);
      min-height:100vh; display:flex; align-items:center; justify-content:center; padding:22px;
    }
    .app{
      width:min(1040px,100%);
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--border); box-shadow:var(--shadow);
      border-radius:var(--radius); overflow:hidden;
    }
    header{
      padding:18px 18px 14px; border-bottom:1px solid var(--border);
      display:flex; gap:14px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap;
    }
    h1{margin:0; font-size:20px; letter-spacing:.2px}
    .sub{color:var(--muted); font-size:13px; line-height:1.25; max-width:720px}
    .stats{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
    .pill{
      border:1px solid var(--border); background: rgba(0,0,0,.18);
      border-radius:999px; padding:8px 10px; font-size:12px; color:var(--muted);
      display:flex; gap:6px; align-items:center; white-space:nowrap;
    }
    .pill b{color:var(--text)}
    main{padding:18px; display:grid; grid-template-columns: 1.08fr .92fr; gap:14px}
    @media(max-width:900px){main{grid-template-columns:1fr}}

    .card{background: rgba(0,0,0,.18); border:1px solid var(--border); border-radius:var(--radius2); padding:14px}

    .scenario{
      background: linear-gradient(180deg, rgba(122,162,255,.10), rgba(0,0,0,.18));
      border:1px solid rgba(122,162,255,.22);
      border-radius:var(--radius2);
      padding:16px; min-height:170px;
      display:flex; flex-direction:column; gap:10px; position:relative; overflow:hidden;
    }
    .scenario::after{
      content:""; position:absolute; inset:-60px -80px auto auto;
      width:240px; height:240px;
      background: radial-gradient(circle, rgba(122,162,255,.22), transparent 60%);
      transform: rotate(18deg);
    }
    .scenario-label{
      font-family:var(--mono); font-size:11px; color: rgba(231,238,252,.75);
      letter-spacing:.6px; text-transform:uppercase; display:flex; gap:8px; flex-wrap:wrap; z-index:1;
    }
    .badge{
      font-family:var(--mono); font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color:var(--muted); background: rgba(0,0,0,.18);
      white-space:nowrap;
    }
    .scenario-text{margin:0; font-size:17px; line-height:1.35; z-index:1}

    .row2{display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:12px}
    @media(max-width:540px){.row2{grid-template-columns:1fr}}

    button{
      appearance:none; border:1px solid var(--border); background: rgba(0,0,0,.20);
      color:var(--text); padding:12px 10px; border-radius:14px; font-size:14px;
      cursor:pointer; transition: transform .05s ease, background .15s ease, border-color .15s ease;
      user-select:none;
    }
    button:hover{ background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.16); }
    button:active{ transform: translateY(1px); }
    button.primary{ border-color: rgba(122,162,255,.35); background: rgba(122,162,255,.12); }
    button.primary:hover{ background: rgba(122,162,255,.18); }
    button.good{ border-color: rgba(43,213,118,.40); background: rgba(43,213,118,.14); }
    button.bad{ border-color: rgba(255,92,122,.45); background: rgba(255,92,122,.14); }
    button:disabled{ opacity:.55; cursor:not-allowed; transform:none; }

    .choices{
      display:grid; grid-template-columns: repeat(3, minmax(0,1fr));
      gap:10px; margin-top: 12px;
    }
    @media(max-width:540px){.choices{grid-template-columns:repeat(2, minmax(0,1fr))}}

    .feedback{
      margin-top:10px; padding:12px; border-radius:14px; border:1px solid var(--border);
      background: rgba(0,0,0,.18); color:var(--muted); min-height:54px;
      display:flex; align-items:flex-start; gap:10px;
    }
    .feedback .icon{
      width:18px; height:18px; border-radius:6px; display:inline-flex;
      align-items:center; justify-content:center; font-weight:900; font-size:12px; margin-top:2px;
      flex: 0 0 auto;
    }
    .icon.good{ background: rgba(43,213,118,.16); color: var(--good); border:1px solid rgba(43,213,118,.35); }
    .icon.bad{ background: rgba(255,92,122,.16); color: var(--bad); border:1px solid rgba(255,92,122,.35); }
    .icon.warn{ background: rgba(255,209,102,.16); color: var(--warn); border:1px solid rgba(255,209,102,.35); }

    .stepbox{
      margin-top:12px; border-radius:14px; border:1px solid var(--border);
      background: rgba(0,0,0,.18); padding:12px;
    }
    .step-title{font-size:13px; color:var(--muted); margin:0 0 10px}
    .step-title b{color:var(--text)}
    .hidden{display:none !important}

    .explain{
      margin-top:12px; border-radius:14px; border:1px solid rgba(43,213,118,.30);
      background: linear-gradient(180deg, rgba(43,213,118,.10), rgba(0,0,0,.18));
      padding:12px; display:none;
    }
    .explain h3{margin:0 0 8px; font-size:14px}
    .explain .grid{display:grid; grid-template-columns:1fr; gap:8px; color:var(--muted); font-size:13px; line-height:1.35}
    .explain b{color:var(--text)}
    .mini{font-family:var(--mono); font-size:11px; color: rgba(231,238,252,.70); margin-top:8px}

    .controls{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}

    .sidebar h2{margin:0 0 10px; font-size:15px}
    .help{margin:0 0 12px; color:var(--muted); font-size:13px; line-height:1.35}
    .rulebox{border-radius:14px; border:1px solid var(--border); background: rgba(0,0,0,.18); padding:12px; display:flex; flex-direction:column; gap:10px}
    .rule{display:flex; gap:10px; align-items:flex-start}
    .dot{width:10px; height:10px; border-radius:3px; margin-top:5px; flex:0 0 auto; border:1px solid var(--border);
         background: rgba(122,162,255,.22); border-color: rgba(122,162,255,.32);}
    .footer{
      padding:14px 18px 18px; border-top:1px solid var(--border);
      display:flex; gap:10px; flex-wrap:wrap; justify-content:space-between; align-items:center;
      color:var(--muted); font-size:12px;
    }
    .linkish{color: rgba(231,238,252,.75); text-decoration: underline; cursor:pointer}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>Bill of Rights — Right or No Right?</h1>
        <div class="sub">
          Step 1: Decide if the government action is <b>Constitutional (Allowed)</b> or <b>Unconstitutional (Violation)</b>.
          Step 2: Choose the amendment that best governs the scenario. You can’t advance until both steps are correct.
        </div>
      </div>
      <div class="stats">
        <div class="pill">Scenario <b id="qNum">1</b>/<b id="qTotal">0</b></div>
        <div class="pill">Correct Chains <b id="correctCt">0</b></div>
        <div class="pill">Total Attempts <b id="attemptCt">0</b></div>
        <div class="pill">This Scenario Attempts <b id="attemptThis">0</b></div>
        <div class="pill">Timer <b id="timeEl">0:00</b></div>
        <div class="pill">Now <b id="nowStamp">—</b></div>
        <div class="pill">Started <b id="startStamp">—</b></div>
      </div>
    </header>

    <main>
      <section class="card">
        <div class="scenario">
          <div class="scenario-label">
            <span class="badge" id="streakBadge">Streak: 0</span>
            <span class="badge" id="stepBadge">Step: 1 of 2</span>
            <span class="badge" id="attemptBadge">Attempt #: 0</span>
          </div>
          <p class="scenario-text" id="scenarioText">Loading…</p>
        </div>

        <div class="stepbox" id="step1Box">
          <p class="step-title"><b>Step 1:</b> Is this government action constitutional?</p>
          <div class="row2">
            <button class="good" id="btnAllowed">Constitutional (Allowed)</button>
            <button class="bad" id="btnViolation">Unconstitutional (Violation)</button>
          </div>
        </div>

        <div class="stepbox hidden" id="step2Box">
          <p class="step-title"><b>Step 2:</b> Which amendment best applies?</p>
          <div class="choices" id="choices"></div>
        </div>

        <div class="controls">
          <button class="primary" id="btnHint">Hint</button>
          <button id="btnSkip" title="Teacher tool: skip this scenario">Teacher Skip</button>
          <button id="btnRestart">Restart</button>
        </div>

        <div class="feedback" id="feedback">
          <span class="icon warn">!</span>
          <div>
            <div><b>Directions:</b> Step 1 first, then Step 2.</div>
            <div style="margin-top:4px">You’ll get the explanation after the full chain is correct.</div>
          </div>
        </div>

        <div class="explain" id="explainBox">
          <h3 id="explainTitle">Correct</h3>
          <div class="grid" id="explainGrid"></div>
          <div class="mini" id="explainMini"></div>
          <div class="controls" style="margin-top:10px">
            <button class="good" id="btnNext">Next Scenario</button>
          </div>
        </div>
      </section>

      <aside class="card sidebar">
        <h2>How to think like OST</h2>
        <p class="help">Rights are protected, but government can sometimes regulate (time/place/manner, safety). This game forces you to decide: Allowed vs Violation, then name the amendment.</p>

        <div class="rulebox">
          <div class="rule"><span class="dot"></span><div><b>Allowed:</b> regulation is neutral, narrow, and tied to safety/order (e.g., noise limits, permit requirements that aren’t used to shut speech down).</div></div>
          <div class="rule"><span class="dot"></span><div><b>Violation:</b> government targets a viewpoint, censors criticism, searches without legal basis, forces confession, denies counsel, or uses cruel/excessive punishment.</div></div>
          <div class="rule"><span class="dot"></span><div><b>S
